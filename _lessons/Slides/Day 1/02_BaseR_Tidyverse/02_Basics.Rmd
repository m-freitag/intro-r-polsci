---
title: "Lys"
subtitle: "goes Xaringan"  
author: 
  - "Markus Freitag"
date: '`r Sys.Date()`'
output:
  xaringan::moon_reader:
    includes:
      after_body: "handw.js"
    css: ["default", "lys.css", "lys-fonts.css"]
    nature:
      beforeInit: "macros.js"
      slideNumberFormat: "%current%"
      highlightStyle: github
      highlightLines: true
      ratio: 16:9
    seal: false
---



```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE)

knitr::opts_chunk$set(
  fig.align = "center",
  fig.retina = 2,
  cache = F#, echo=F, warning=F, message=F
  )

# knitr::opts_chunk$set(fig.dim=c(4.8, 4.5), fig.retina=2, out.width="100%")

# install package management tool pacman
# install.packages("pacman")

# devtools::install_github("CorrelAid/datenguideR")

pacman::p_load(
  tidyverse,
  showtext,
  dagitty,
  ggdag,
  data.table,
  patchwork,
  rvest
)


# font_add_google(
#   name = "IBM Plex Sans",
#   family = "plex"
# )

# showtext_auto()



knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE
)

```


```{r set-ggplot-theme, include=FALSE}

theme_set(theme_classic() +
  theme(
    text = element_text(family = "plex", size = 25, colour="#415564"),
    panel.background = element_rect(fill = "#f6f3f2"), 
    plot.background = element_rect(fill = "#f6f3f2", color = "#f6f3f2"), 
    panel.grid.major = element_line(colour="#e8e8e8"),
    panel.grid.minor = element_blank(), 
    legend.background = element_rect(fill = "#f6f3f2"), 
    legend.box.background = element_rect(fill = "#f6f3f2"), 
    axis.text = element_text(colour="#415564"),
    axis.line = element_line(colour="#415564"),
    axis.title = element_text(colour="#415564"),
    axis.ticks = element_line(colour="#415564"),
  ))

purple <- "#644155"

```


```{r xaringan-scribble, echo=FALSE}
xaringanExtra::use_scribble(pen_color = purple)
```


class: inverse, center, title-slide, middle

<style>
.title-slide .remark-slide-number {
  display: none;
}
</style>

# .title-wrap[Intro to Programming with R for Political Scientists]

<br /> 

## .handw[]

### Markus Freitag

### Geschwister Scholl Institute of Political Science, LMU

### [`r icons::icon_style(icons::fontawesome("twitter"), fill = "#415564")`](https://twitter.com/MarkusGFreitag) [`r icons::icon_style(icons::fontawesome("globe"), fill = "#415564")`](https://markusfreitag.netlify.app/)


### `r Sys.Date()`

<a href="https://github.com/m-freitag" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#415564; color:#f6f3f2; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

---
# Overview

1. .hl[Intro]

2. .hl[R-Studio and (Git)Hub]

3. .hl[Base R & Tidyverse Basics]

4. .hl[Data Wrangling I]

5. .hl[Data Wrangling II]

6. .hl[Data Viz]

7. .hl[Writing Functions]

8. .hl[A complete scientific workflow with R]

---

# Trivia

- R was designed in 1993 by Ross Ihaka and Robert Gentleman

- Builds upon the S programming language by John Chambers

    - Named R as a play on S and bc of the first names of the authors

```{r, echo = FALSE, results='hide'}

CRANpackages <- available.packages()
nrow(CRANpackages)

nb_pkgs <- nrow(CRANpackages)
```

- There are `r nb_pkgs` packages available on [CRAN](https://cran.r-project.org/) as of `r Sys.Date()`.

- [R-Studio](https://www.rstudio.com/about/) $\neq$ [R-Core Team](https://www.r-project.org/contributors.html); the former is a mix of a for-profit and a non-profit company; highly committed to produce free & open-source products; has some business solutions

```{r, echo=FALSE, fig.align='center', out.width= "25%"}
knitr::include_graphics("Figs/devs.png")
```
.center[.font50[[Image source and more R-History trivia](https://rss.onlinelibrary.wiley.com/doi/epdf/10.1111/j.1740-9713.2018.01169.x)]]

---
  
 # Workflow

- You forked and cloned the course repo.

- Navigate to `Session Scripts > Session 2` and open `Session_2_script.R`.

- You will see a pre-formatted Script containing some useful information on comments 
and formatting. 

- The script is otherwise empty. Fill it with the stuff I will discuss on the slides.

- Make comments for yourself. Learn as you write. Explore. Stage, commit and push. 

<center><img src= "https://www.cs.cmu.edu/~cangiuli/img/angry.gif"></center>

- If you have a second monitor, great! If not, split your screen. 


---

class: inverse, center, middle
name: intro

# CalculatoR


---

# CalculatoR

```{r}

7+5 # [n] stands for the nth element printed to the console. 

```

```{r}

4*5+2/3^3 # Multiplication and division first, then addition and subtraction

# Modulo Operators:

10 %/% 3 # Integer division

10 %% 3 # Remainder ("Rest")
```

---

# CalculatoR

```{r}
# Relational and logical operators

3 < 4

2 == 1 & 4 > 2  # == "equal to"; & "element wise logical AND"

2 == 1 | 4 > 2 # | "element wise logical or"

3 != 4 # != "not equal"

7 %in% 300:500 # %in% can be used to evaluate matches in objects

# Take care about the order of precedence...

```

---
# CalculatoR

.pull-left[
```{r}

# Floating Points

0.1 + 0.2

0.1 + 0.2 == 0.3

```

Why?!

> [Because internally, computers use a format (binary floating-point) that cannot accurately represent a number like 0.1, 0.2 or 0.3 at all.](https://floating-point-gui.de/basic/)


]

.pull-right[

```{r, echo=FALSE, fig.align='center', out.width= "60%"}
knitr::include_graphics("Figs/robot.png")
```

] 

---

class: inverse, center, middle
name: intro

# A Primer on OOP ("Object Oriented Programming")

---

# Object Oriented Programming

> Everything is an object and everything has a name.

```{r, echo=FALSE, fig.align='center', out.width= "80%"}
knitr::include_graphics("Classes.svg")
```


---

# Functions

- [Functions](https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Function-objects) are objects; we will discuss them in more detail in session x

- For now, just think of them in the usual mathematical sense, where we pass some argument and get back a value. E.g. $f(x) = \frac{2x + 3}{\sqrt{3}}$.

- In R, one or multiple arguments get passed to the function body (where the function is defined) and you get back some results.

--

- For instance, to define the above function and call it, we specify the following:
```{r}
f <- function(x) {
  (2*x + 3)/sqrt(3)
} 

f(3)
```

---

# Functions

- There are many functions in R, some are written by users and 
scientists and put into some package, some are built-in functions of "base" R.<sup>.font70[[1]]</sup> 

- A really helpful built-in function - fin the literal sense - is the... `help()` function.

- Gives you more information about the usage and arguments of a built-in/user-written function.
  
We can also call `help()` to get help about help:
```{r, results = "hide"}
# help(help)
# Or for short:
?help
```


- But let's not get ahead of ourselves... what did this arrow (`<-`) thing do?

.font70[<sup>[1]</sup>.hl[Fine Point:] The arithmetic, logical and relational operators we met are actually also function calls.]

---

# Making Objects: Assignment (Operators)
.pull-left[
- You can use `<-` or `=` for assignment

- For instance, 
```{r}
a <- 3 # Or a = 3; under the hood, assignment works more like a -> 3
```
assigns the name `x` to an object of type/mode numeric holding the value 3. I.e. binds an object to a name.

Simplification:
> creates an object named `a`, containing the value `3`.
]

--
  
.pull-right[
-Using
```{r, results= "hide"}
class(a)
mode(a)
```  
gives you information about the class/type of the object. `class()` gives the 
class of the object from an OOP POV, `typeof()` the base type.  

- In this case, this is not very interesting as we created an **atomic** numeric vector. 

- What is the class/type  of `b <- 3 > 2` and `c <- "string"`?

]

---

# Making Objects: Assignment (Operators)

- Using `=` is legal as per the man, the myth, the legend Ross Ihaka himself:

<center><iframe width="560" height="315" src="https://www.youtube.com/embed/88TftllIjaY?start=2100" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center>

- But there are also some sensible arguments to stick mostly to `->`in casual settings (e.g. readability: easier to discriminate from arguments)

- Bottom line: **be consistent**.

---

# Naming Conventions

- For readability, we want names of/bound to objects to be meaningful.

- Pretty easy to do when working with "real" data; laziness pretty much the only obstacle ;)

- There are several naming conventions. I like `snake_case` and `camelCase` the most. We will use snake cases in this course.

- Be consistent.

- There are some ["forbidden"/"reserved" words](https://stat.ethz.ch/R-manual/R-devel/library/base/html/Reserved.html) 
that cannot be assigned as names. E.g. `NA` (logical constant indicating 
missing values), `if`, `else`, `break`. 

---

# Workspace/Environment

- In contrast to Stata, R can hold multiple objects at a time.

- This is very convenient; you can copy, modify etc. R also copies **ALOT** internally (one reason why its sort of a slow language).

- The global environment is the interactive workspace you usually work with.

- In R-Studio you can inspect some objects by clicking on them (equivalent to calling `View()`)

--
  
- We won't go into the details of environments but see [here](https://adv-r.hadley.nz/environments.html)
for an advanced treatment.

- This will get more intuitive soon (e.g. when we take on different data structures on the next few slided)

---

# Vectors

- Vectors are the most fundamental data structure in R.

- As vectors in R have to be of the same type (e.g. numeric), they 
are often called **atomic** vectors

- *[Technical Fine Point:](https://adv-r.hadley.nz/vectors-chap.html)* Vectors have attributes, importantly dimension and class. 
With the dimension attribute, vectors can become arrays and matrices. With the class 
attribute, we can built an S3 object on top of the base type (compare to this slide).

--

We can build longer vectors by concenating shorter ones using the `c()` function:

```{r, results= "hide"}
chr_var <- c("a","b","c","d") # A 4-element atomic vector of type character
``` 
Indexing:
```{r, results= "hide"}
chr_var[3] # Returns the third element of object "chr_var".
```

---

# Lists

- Objects of type list are highly versatile. They are vectors but more "generic".

- I.e. elements of a list can have different types.<sup>.font70[[2]]</sup>

For example:
```{r, results= "hide"}
list_a <- list(
  5:7,
  "string",
  c(TRUE, TRUE),
  c(1.23, 4.20)
)
```
constructs a list using the function `list()`.  

.font70[<sup>[1]</sup>.hl[Fine Point:] A list does not store objects of different types, it references to them.]

---

# Factors


---

# Data Frames

- Data frames are special lists: lists of evenly sized vectors.

- You likely already have a grasp for their structure from Stata or other software; they are 
crucial for data analysis --> the rectangle we love.


---

# Loading Packages


---

# The Tidyverse


---

# The Tidyverse


---

# Summary




```{r print pdf, include=FALSE}

  pagedown::chrome_print("./02_Basics.html")

```
 
